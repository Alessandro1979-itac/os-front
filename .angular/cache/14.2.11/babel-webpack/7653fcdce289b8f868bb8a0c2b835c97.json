{"ast":null,"code":"import { UntypedFormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-toastr\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/auth.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/icon\";\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(toastService, router, authService) {\n      this.toastService = toastService;\n      this.router = router;\n      this.authService = authService;\n      this.creds = {\n        email: '',\n        senha: ''\n      };\n      this.email = new UntypedFormControl('', [Validators.email]);\n      this.senha = new UntypedFormControl('', [Validators.minLength(3)]);\n    }\n    ngOnInit() {\n      /* TODO document why this method 'ngOnInit' is empty */\n    }\n    logar() {\n      this.authService.authenticate(this.creds).subscribe(resposta => {\n        this.authService.successfulLogin(resposta.headers.get('Authorization').substring(7));\n        this.router.navigate(['']);\n      }, () => {\n        this.toastService.error('Usuário e/ou senha inválidos');\n      });\n    }\n    validaCampos() {\n      return this.email.valid && this.senha.valid;\n    }\n  }\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.ToastrService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthService));\n  };\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 19,\n    vars: 5,\n    consts: [[1, \"container\"], [1, \"form\", \"mat-elevation-z8\"], [\"src\", \"assets/img/login-image.svg\", \"alt\", \"login-image\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"required\", \"\", \"name\", \"email\", \"matInput\", \"\", \"placeholder\", \"Ex. fulano@mail.com\", 3, \"formControl\", \"ngModel\", \"ngModelChange\"], [\"matSuffix\", \"\"], [\"required\", \"\", \"name\", \"senha\", \"type\", \"password\", \"matInput\", \"\", \"placeholder\", \"Ex. 123\", 3, \"formControl\", \"ngModel\", \"ngModelChange\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 1, \"full-width\", \"mat-elevation-z4\", 3, \"disabled\", \"click\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"h1\");\n        i0.ɵɵtext(3, \"Assist\\u00EAncia T\\u00E9cnica - AMC Dev-System\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"img\", 2);\n        i0.ɵɵelementStart(5, \"mat-form-field\", 3)(6, \"mat-label\");\n        i0.ɵɵtext(7, \"E-mail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.creds.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"mat-icon\", 5);\n        i0.ɵɵtext(10, \"email\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"mat-form-field\", 3)(12, \"mat-label\");\n        i0.ɵɵtext(13, \"Senha\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.creds.senha = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"mat-icon\", 5);\n        i0.ɵɵtext(16, \"password\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_17_listener() {\n          return ctx.logar();\n        });\n        i0.ɵɵtext(18, \" Login \");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formControl\", ctx.email)(\"ngModel\", ctx.creds.email);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formControl\", ctx.senha)(\"ngModel\", ctx.creds.senha);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !ctx.validaCampos());\n      }\n    },\n    dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgForm, i4.FormControlDirective, i5.MatFormField, i5.MatLabel, i5.MatSuffix, i6.MatButton, i7.MatInput, i8.MatIcon],\n    styles: [\".container[_ngcontent-%COMP%]{height:100%;background:linear-gradient(180deg,rgba(2,0,36,1) 0%,rgba(37,97,207,1) 0%,rgba(0,212,255,1) 100%);display:flex;align-items:center;justify-content:center}.form[_ngcontent-%COMP%]{width:30rem;margin:auto;background-color:#ebebeb;padding:4rem 1rem;border-radius:1rem}h1[_ngcontent-%COMP%]{width:100%;text-align:center}img[_ngcontent-%COMP%]{height:15rem;width:100%;margin:1.5rem auto}.full-width[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-top:1.5rem}mat-icon[_ngcontent-%COMP%]{opacity:.6}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}